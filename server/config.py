"""
Python Security Analysis System - 설정 파일
===========================================

이 모듈은 시스템의 모든 설정값을 중앙 집중식으로 관리합니다.

주요 설정 카테고리:
- 데이터베이스 설정
- 파일 업로드 설정
- AI 분석 설정
- API 서버 설정
- 보안 설정
- 로깅 설정
"""

import os
from pathlib import Path

# =============================================================================
# 기본 디렉토리 설정
# =============================================================================

# 서버 루트 디렉토리
BASE_DIR = Path(__file__).parent

# =============================================================================
# 데이터베이스 설정
# =============================================================================

# SQLite 데이터베이스 URL
DATABASE_URL = "sqlite:///./main.db"
# 데이터베이스 파일 경로
DATABASE_PATH = BASE_DIR / "main.db"

# =============================================================================
# 파일 업로드 설정
# =============================================================================

# 업로드 디렉토리
UPLOAD_DIR = BASE_DIR / "uploads"
# 최대 파일 크기 (100MB)
MAX_FILE_SIZE = 100 * 1024 * 1024
# 허용된 파일 확장자 (ZIP 파일만)
ALLOWED_EXTENSIONS = {".zip"}

# =============================================================================
# AI 분석 설정
# =============================================================================

# 분석 타임아웃 (5분)
ANALYSIS_TIMEOUT = 300
# 배치 크기 (한 번에 처리할 파일 수)
BATCH_SIZE = 8
# 최대 코드 길이 (토큰 수)
MAX_CODE_LENGTH = 512
# 스트라이드 (슬라이딩 윈도우 크기)
STRIDE = 128
# 임계값 (분류 기준)
THRESHOLD = 0.5

# =============================================================================
# AI 모델 경로 설정
# =============================================================================

# 모델 디렉토리
MODEL_DIR = BASE_DIR / "models"
# LSTM 모델 디렉토리
LSTM_MODEL_PATH = MODEL_DIR / "lstm"
# Word2Vec 모델 파일 경로
W2V_MODEL_PATH = MODEL_DIR / "w2v" / "word2vec_withString10-6-100.model"

# =============================================================================
# API 서버 설정
# =============================================================================

# API 버전 프리픽스
API_V1_PREFIX = "/api/v1"
# 서버 호스트
HOST = "127.0.0.1"
# 서버 포트
PORT = 8000

# =============================================================================
# 로깅 설정
# =============================================================================

# 로그 레벨
LOG_LEVEL = "INFO"

# =============================================================================
# 보안 설정
# =============================================================================

# 시크릿 키 (환경변수에서 가져오거나 기본값 사용)
SECRET_KEY = os.getenv("SECRET_KEY", "your-secret-key-here")
# 액세스 토큰 만료 시간 (분)
ACCESS_TOKEN_EXPIRE_MINUTES = 30

# =============================================================================
# 디렉토리 생성
# =============================================================================

# 필요한 디렉토리들을 자동으로 생성
UPLOAD_DIR.mkdir(exist_ok=True)  # 업로드 디렉토리
MODEL_DIR.mkdir(exist_ok=True)   # 모델 디렉토리
